From 216a8984d4afb21795b2bc5592d79467d7a37515 Mon Sep 17 00:00:00 2001
From: Michael Catanzaro <mcatanzaro@gnome.org>
Date: Tue, 12 Jan 2021 15:56:53 -0600
Subject: [PATCH] Disable yr.no weather provider

See: #682
---
 src/weather/gcal-weather-service.c | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

diff --git a/src/weather/gcal-weather-service.c b/src/weather/gcal-weather-service.c
index 1eac8fe5..29e3276c 100644
--- a/src/weather/gcal-weather-service.c
+++ b/src/weather/gcal-weather-service.c
@@ -638,13 +638,11 @@ update_location (GcalWeatherService  *self,
 
       self->gweather_info = gweather_info_new (location);
 
-      /*
-       * NOTE: We do not get detailed infos for GWEATHER_PROVIDER_ALL.
-       * This combination works fine, though. We should open a bug / investigate
-       * what is going on.
+      /* FIXME: Enable GWEATHER_PROVIDER_MET_NO if we can comply with their terms of service.
+       * https://gitlab.gnome.org/GNOME/gnome-calendar/-/issues/682
        */
-      gweather_info_set_enabled_providers (self->gweather_info, GWEATHER_PROVIDER_METAR | GWEATHER_PROVIDER_OWM | GWEATHER_PROVIDER_YR_NO);
-      g_signal_connect_object (self->gweather_info, "updated", (GCallback) on_gweather_update_cb, self, 0);
+      gweather_info_set_enabled_providers (self->gweather_info, GWEATHER_PROVIDER_METAR | GWEATHER_PROVIDER_OWM);
+      g_signal_connect_object (self->gweather_info, "updated", (GCallback) on_gqweather_update_cb, self, 0);
 
       /*
        * gweather_info_update might or might not trigger a
-- 
GitLab

